"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = void 0;
var _easy = require("easy");
var _constants = require("../constants");
var LEFT_MOUSE_BUTTON = _easy.constants.LEFT_MOUSE_BUTTON;
function isDragging() {
    var dragging = this.hasClass("dragging");
    return dragging;
}
function startWaitingToDrag(mouseTop, mouseLeft) {
    var timeout = this.getTimeout();
    if (timeout === null) {
        timeout = setTimeout((function() {
            this.resetTimeout();
            var draggableMouseOver = this.isDraggableMouseOver(mouseTop, mouseLeft);
            if (draggableMouseOver) {
                this.startDrag(mouseTop, mouseLeft);
            }
        }).bind(this), _constants.START_DRAG_DELAY);
        this.updateTimeout(timeout);
    }
}
function stopWaitingToDrag() {
    var timeout = this.getTimeout();
    if (timeout !== null) {
        clearTimeout(timeout);
        this.resetTimeout();
    }
}
function startDrag(mouseTop, mouseLeft) {
    var bounds = this.getBounds(), eventType = _constants.START_DRAG, boundsTop = bounds.getTop(), boundsLeft = bounds.getLeft(), topOffset = mouseTop - boundsTop, leftOffset = mouseLeft - boundsLeft, startMouseTop = mouseTop, startMouseLeft = mouseLeft, relativeMouseTop = mouseTop - startMouseTop, relativeMouseLeft = mouseLeft - startMouseLeft;
    this.addClass("dragging");
    this.setTopOffset(topOffset);
    this.setLeftOffset(leftOffset);
    this.setStartMouseTop(startMouseTop);
    this.setStartMouseLeft(startMouseLeft);
    this.callHandlers(eventType, relativeMouseTop, relativeMouseLeft);
    this.drag(mouseTop, mouseLeft);
}
function dragging(mouseTop, mouseLeft) {
    this.drag(mouseTop, mouseLeft);
}
function stopDrag(mouseTop, mouseLeft) {
    var eventType = _constants.STOP_DRAG, startMouseTop = this.getStartMouseTop(), startMouseLeft = this.getStartMouseLeft(), relativeMouseTop = mouseTop - startMouseTop, relativeMouseLeft = mouseLeft - startMouseLeft;
    this.callHandlers(eventType, relativeMouseTop, relativeMouseLeft);
    this.removeClass("dragging");
}
function drag(mouseTop, mouseLeft) {
    var eventType = _constants.DRAG, topOffset = this.getTopOffset(), leftOffset = this.getLeftOffset(), startMouseTop = this.getStartMouseTop(), startMouseLeft = this.getStartMouseLeft(), relativeMouseTop = mouseTop - startMouseTop, relativeMouseLeft = mouseLeft - startMouseLeft;
    var top = startMouseTop + relativeMouseTop - topOffset, left = startMouseLeft + relativeMouseLeft - leftOffset;
    top = "".concat(top, "px"); ///
    left = "".concat(left, "px"); ///
    var css = {
        top: top,
        left: left
    };
    this.css(css);
    this.callHandlers(eventType, relativeMouseTop, relativeMouseLeft);
}
function onDrag(dragHandler, element) {
    var eventType = _constants.DRAG, handler = dragHandler; ///
    this.addEventListener(eventType, handler, element);
}
function offDrag(dragHandler, element) {
    var eventType = _constants.DRAG, handler = dragHandler; ///
    this.removeEventListener(eventType, handler, element);
}
function onStopDrag(stopDragHandler, element) {
    var eventType = _constants.STOP_DRAG, handler = stopDragHandler; ///
    this.addEventListener(eventType, handler, element);
}
function offStopDrag(stopDragHandler, element) {
    var eventType = _constants.STOP_DRAG, handler = stopDragHandler; ///
    this.removeEventListener(eventType, handler, element);
}
function onStartDrag(startDragHandler, element) {
    var eventType = _constants.START_DRAG, handler = startDragHandler; ///
    this.addEventListener(eventType, handler, element);
}
function offStartDrag(startDragHandler, element) {
    var eventType = _constants.START_DRAG, handler = startDragHandler; ///
    this.removeEventListener(eventType, handler, element);
}
function callHandlers(eventType, relativeMouseTop, relativeMouseLeft) {
    var eventListeners = this.findEventListeners(eventType);
    eventListeners.forEach(function(eventListener) {
        var handler = eventListener.handler, element = eventListener.element;
        handler.call(element, relativeMouseTop, relativeMouseLeft);
    });
}
function enableDragging() {
    var timeout = null, topOffset = null, leftOffset = null, startMouseTop = null, startMouseLeft = null;
    this.setState({
        timeout: timeout,
        topOffset: topOffset,
        leftOffset: leftOffset,
        startMouseTop: startMouseTop,
        startMouseLeft: startMouseLeft
    });
    this.onMouseDown(this.draggableMouseDownHandler, this);
}
function disableDragging() {
    this.offMouseDown(this.draggableMouseDownHandler, this);
}
function isDraggableMouseOver(mouseTop, mouseLeft) {
    var bounds = this.getBounds(), boundsOverlappingMouse = bounds.isOverlappingMouse(mouseTop, mouseLeft), draggableMouseOver = boundsOverlappingMouse; ///
    return draggableMouseOver;
}
function draggableMouseDownHandler(event, element) {
    var button = event.button;
    _easy.window.on("blur", this.draggableMouseUpHandler, this); ///
    _easy.window.onMouseUp(this.draggableMouseUpHandler, this);
    _easy.window.onMouseMove(this.draggableMouseMoveHandler, this);
    if (button === LEFT_MOUSE_BUTTON) {
        var dragging1 = this.isDragging();
        if (!dragging1) {
            var mouseTop = mouseTopFromEvent(event), mouseLeft = mouseLeftFromEvent(event);
            this.startWaitingToDrag(mouseTop, mouseLeft);
        }
    }
}
function draggableMouseMoveHandler(event, element) {
    var mouseTop = mouseTopFromEvent(event), mouseLeft = mouseLeftFromEvent(event);
    var dragging2 = this.isDragging();
    if (dragging2) {
        this.dragging(mouseTop, mouseLeft);
    }
}
function draggableMouseUpHandler(event, element) {
    _easy.window.off("blur", this.draggableMouseUpHandler, this); ///
    _easy.window.offMouseUp(this.draggableMouseUpHandler, this);
    _easy.window.offMouseMove(this.draggableMouseMoveHandler, this);
    var dragging2 = this.isDragging();
    if (dragging2) {
        var mouseTop = mouseTopFromEvent(event), mouseLeft = mouseLeftFromEvent(event);
        this.stopDrag(mouseTop, mouseLeft);
    } else {
        this.stopWaitingToDrag();
    }
}
function resetTimeout() {
    var timeout = null;
    this.updateTimeout(timeout);
}
function getTimeout() {
    var state = this.getState(), timeout = state.timeout;
    return timeout;
}
function getTopOffset() {
    var state = this.getState(), topOffset = state.topOffset;
    return topOffset;
}
function getLeftOffset() {
    var state = this.getState(), leftOffset = state.leftOffset;
    return leftOffset;
}
function getStartMouseTop() {
    var state = this.getState(), startMouseTop = state.startMouseTop;
    return startMouseTop;
}
function getStartMouseLeft() {
    var state = this.getState(), startMouseLeft = state.startMouseLeft;
    return startMouseLeft;
}
function updateTimeout(timeout) {
    this.updateState({
        timeout: timeout
    });
}
function setTopOffset(topOffset) {
    this.updateState({
        topOffset: topOffset
    });
}
function setLeftOffset(leftOffset) {
    this.updateState({
        leftOffset: leftOffset
    });
}
function setStartMouseTop(startMouseTop) {
    this.updateState({
        startMouseTop: startMouseTop
    });
}
function setStartMouseLeft(startMouseLeft) {
    this.updateState({
        startMouseLeft: startMouseLeft
    });
}
var _default = {
    isDragging: isDragging,
    startWaitingToDrag: startWaitingToDrag,
    stopWaitingToDrag: stopWaitingToDrag,
    startDrag: startDrag,
    dragging: dragging,
    stopDrag: stopDrag,
    drag: drag,
    onDrag: onDrag,
    offDrag: offDrag,
    onStopDrag: onStopDrag,
    offStopDrag: offStopDrag,
    onStartDrag: onStartDrag,
    offStartDrag: offStartDrag,
    callHandlers: callHandlers,
    enableDragging: enableDragging,
    disableDragging: disableDragging,
    isDraggableMouseOver: isDraggableMouseOver,
    draggableMouseDownHandler: draggableMouseDownHandler,
    draggableMouseMoveHandler: draggableMouseMoveHandler,
    draggableMouseUpHandler: draggableMouseUpHandler,
    resetTimeout: resetTimeout,
    getTimeout: getTimeout,
    getTopOffset: getTopOffset,
    getLeftOffset: getLeftOffset,
    getStartMouseTop: getStartMouseTop,
    getStartMouseLeft: getStartMouseLeft,
    updateTimeout: updateTimeout,
    setTopOffset: setTopOffset,
    setLeftOffset: setLeftOffset,
    setStartMouseTop: setStartMouseTop,
    setStartMouseLeft: setStartMouseLeft
};
exports.default = _default;
function mouseTopFromEvent(event) {
    var pageY = event.pageY, scrollTop = _easy.window.getScrollTop(), mouseTop = pageY + scrollTop;
    return mouseTop;
}
function mouseLeftFromEvent(event) {
    var pageX = event.pageX, scrollLeft = _easy.window.getScrollLeft(), mouseLeft = pageX + scrollLeft;
    return mouseLeft;
}

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9taXhpbnMvZHJhZ2dhYmxlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyB3aW5kb3csIGNvbnN0YW50cyB9IGZyb20gXCJlYXN5XCI7XG5cbmltcG9ydCB7IERSQUcsIFNUT1BfRFJBRywgU1RBUlRfRFJBRywgU1RBUlRfRFJBR19ERUxBWSB9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcblxuY29uc3QgeyBMRUZUX01PVVNFX0JVVFRPTiB9ID0gY29uc3RhbnRzO1xuXG5mdW5jdGlvbiBpc0RyYWdnaW5nKCkge1xuICBjb25zdCBkcmFnZ2luZyA9IHRoaXMuaGFzQ2xhc3MoXCJkcmFnZ2luZ1wiKTtcblxuICByZXR1cm4gZHJhZ2dpbmc7XG59XG5cbmZ1bmN0aW9uIHN0YXJ0V2FpdGluZ1RvRHJhZyhtb3VzZVRvcCwgbW91c2VMZWZ0KSB7XG4gIGxldCB0aW1lb3V0ID0gdGhpcy5nZXRUaW1lb3V0KCk7XG5cbiAgaWYgKHRpbWVvdXQgPT09IG51bGwpIHtcbiAgICB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLnJlc2V0VGltZW91dCgpO1xuXG4gICAgICBjb25zdCBkcmFnZ2FibGVNb3VzZU92ZXIgPSB0aGlzLmlzRHJhZ2dhYmxlTW91c2VPdmVyKG1vdXNlVG9wLCBtb3VzZUxlZnQpO1xuXG4gICAgICBpZiAoZHJhZ2dhYmxlTW91c2VPdmVyKSB7XG4gICAgICAgIHRoaXMuc3RhcnREcmFnKG1vdXNlVG9wLCBtb3VzZUxlZnQpO1xuICAgICAgfVxuICAgIH0sIFNUQVJUX0RSQUdfREVMQVkpO1xuXG4gICAgdGhpcy51cGRhdGVUaW1lb3V0KHRpbWVvdXQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHN0b3BXYWl0aW5nVG9EcmFnKCkge1xuICBjb25zdCB0aW1lb3V0ID0gdGhpcy5nZXRUaW1lb3V0KCk7XG5cbiAgaWYgKHRpbWVvdXQgIT09IG51bGwpIHtcbiAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG5cbiAgICB0aGlzLnJlc2V0VGltZW91dCgpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHN0YXJ0RHJhZyhtb3VzZVRvcCwgbW91c2VMZWZ0KSB7XG4gIGNvbnN0IGJvdW5kcyA9IHRoaXMuZ2V0Qm91bmRzKCksXG4gICAgICAgIGV2ZW50VHlwZSA9IFNUQVJUX0RSQUcsXG4gICAgICAgIGJvdW5kc1RvcCA9IGJvdW5kcy5nZXRUb3AoKSxcbiAgICAgICAgYm91bmRzTGVmdCA9IGJvdW5kcy5nZXRMZWZ0KCksXG4gICAgICAgIHRvcE9mZnNldCA9IG1vdXNlVG9wIC0gYm91bmRzVG9wLFxuICAgICAgICBsZWZ0T2Zmc2V0ID0gbW91c2VMZWZ0IC0gYm91bmRzTGVmdCxcbiAgICAgICAgc3RhcnRNb3VzZVRvcCA9IG1vdXNlVG9wLCAvLy9cbiAgICAgICAgc3RhcnRNb3VzZUxlZnQgPSBtb3VzZUxlZnQsIC8vL1xuICAgICAgICByZWxhdGl2ZU1vdXNlVG9wID0gbW91c2VUb3AgLSBzdGFydE1vdXNlVG9wLFxuICAgICAgICByZWxhdGl2ZU1vdXNlTGVmdCA9IG1vdXNlTGVmdCAtIHN0YXJ0TW91c2VMZWZ0O1xuXG4gIHRoaXMuYWRkQ2xhc3MoXCJkcmFnZ2luZ1wiKTtcblxuICB0aGlzLnNldFRvcE9mZnNldCh0b3BPZmZzZXQpO1xuXG4gIHRoaXMuc2V0TGVmdE9mZnNldChsZWZ0T2Zmc2V0KTtcblxuICB0aGlzLnNldFN0YXJ0TW91c2VUb3Aoc3RhcnRNb3VzZVRvcCk7XG5cbiAgdGhpcy5zZXRTdGFydE1vdXNlTGVmdChzdGFydE1vdXNlTGVmdCk7XG5cbiAgdGhpcy5jYWxsSGFuZGxlcnMoZXZlbnRUeXBlLCByZWxhdGl2ZU1vdXNlVG9wLCByZWxhdGl2ZU1vdXNlTGVmdCk7XG5cbiAgdGhpcy5kcmFnKG1vdXNlVG9wLCBtb3VzZUxlZnQpO1xufVxuXG5mdW5jdGlvbiBkcmFnZ2luZyhtb3VzZVRvcCwgbW91c2VMZWZ0KSB7XG4gIHRoaXMuZHJhZyhtb3VzZVRvcCwgbW91c2VMZWZ0KTtcbn1cblxuZnVuY3Rpb24gc3RvcERyYWcobW91c2VUb3AsIG1vdXNlTGVmdCkge1xuICBjb25zdCBldmVudFR5cGUgPSBTVE9QX0RSQUcsXG4gICAgICAgIHN0YXJ0TW91c2VUb3AgPSB0aGlzLmdldFN0YXJ0TW91c2VUb3AoKSxcbiAgICAgICAgc3RhcnRNb3VzZUxlZnQgPSB0aGlzLmdldFN0YXJ0TW91c2VMZWZ0KCksXG4gICAgICAgIHJlbGF0aXZlTW91c2VUb3AgPSBtb3VzZVRvcCAtIHN0YXJ0TW91c2VUb3AsXG4gICAgICAgIHJlbGF0aXZlTW91c2VMZWZ0ID0gbW91c2VMZWZ0IC0gc3RhcnRNb3VzZUxlZnQ7XG5cbiAgdGhpcy5jYWxsSGFuZGxlcnMoZXZlbnRUeXBlLCByZWxhdGl2ZU1vdXNlVG9wLCByZWxhdGl2ZU1vdXNlTGVmdCk7XG5cbiAgdGhpcy5yZW1vdmVDbGFzcyhcImRyYWdnaW5nXCIpO1xufVxuXG5mdW5jdGlvbiBkcmFnKG1vdXNlVG9wLCBtb3VzZUxlZnQpIHtcbiAgY29uc3QgZXZlbnRUeXBlID0gRFJBRyxcbiAgICAgICAgdG9wT2Zmc2V0ID0gdGhpcy5nZXRUb3BPZmZzZXQoKSxcbiAgICAgICAgbGVmdE9mZnNldCA9IHRoaXMuZ2V0TGVmdE9mZnNldCgpLFxuICAgICAgICBzdGFydE1vdXNlVG9wID0gdGhpcy5nZXRTdGFydE1vdXNlVG9wKCksXG4gICAgICAgIHN0YXJ0TW91c2VMZWZ0ID0gdGhpcy5nZXRTdGFydE1vdXNlTGVmdCgpLFxuICAgICAgICByZWxhdGl2ZU1vdXNlVG9wID0gbW91c2VUb3AgLSBzdGFydE1vdXNlVG9wLFxuICAgICAgICByZWxhdGl2ZU1vdXNlTGVmdCA9IG1vdXNlTGVmdCAtIHN0YXJ0TW91c2VMZWZ0O1xuXG4gIGxldCB0b3AgPSBzdGFydE1vdXNlVG9wICsgcmVsYXRpdmVNb3VzZVRvcCAtIHRvcE9mZnNldCxcbiAgICAgIGxlZnQgPSBzdGFydE1vdXNlTGVmdCArIHJlbGF0aXZlTW91c2VMZWZ0IC0gbGVmdE9mZnNldCA7XG5cbiAgdG9wID0gYCR7dG9wfXB4YDsgLy8vXG4gIGxlZnQgPSBgJHtsZWZ0fXB4YDsgLy8vXG5cbiAgY29uc3QgY3NzID0ge1xuICAgIHRvcCxcbiAgICBsZWZ0XG4gIH07XG5cbiAgdGhpcy5jc3MoY3NzKTtcblxuICB0aGlzLmNhbGxIYW5kbGVycyhldmVudFR5cGUsIHJlbGF0aXZlTW91c2VUb3AsIHJlbGF0aXZlTW91c2VMZWZ0KTtcbn1cblxuZnVuY3Rpb24gb25EcmFnKGRyYWdIYW5kbGVyLCBlbGVtZW50KSB7XG4gIGNvbnN0IGV2ZW50VHlwZSA9IERSQUcsXG4gICAgICAgIGhhbmRsZXIgPSBkcmFnSGFuZGxlcjsgIC8vL1xuXG4gIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIGVsZW1lbnQpO1xufVxuXG5mdW5jdGlvbiBvZmZEcmFnKGRyYWdIYW5kbGVyLCBlbGVtZW50KSB7XG4gIGNvbnN0IGV2ZW50VHlwZSA9IERSQUcsXG4gICAgICAgIGhhbmRsZXIgPSBkcmFnSGFuZGxlcjsgIC8vL1xuXG4gIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIGVsZW1lbnQpO1xufVxuXG5mdW5jdGlvbiBvblN0b3BEcmFnKHN0b3BEcmFnSGFuZGxlciwgZWxlbWVudCkge1xuICBjb25zdCBldmVudFR5cGUgPSBTVE9QX0RSQUcsXG4gICAgICAgIGhhbmRsZXIgPSBzdG9wRHJhZ0hhbmRsZXI7ICAvLy9cblxuICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBoYW5kbGVyLCBlbGVtZW50KTtcbn1cblxuZnVuY3Rpb24gb2ZmU3RvcERyYWcoc3RvcERyYWdIYW5kbGVyLCBlbGVtZW50KSB7XG4gIGNvbnN0IGV2ZW50VHlwZSA9IFNUT1BfRFJBRyxcbiAgICAgICAgaGFuZGxlciA9IHN0b3BEcmFnSGFuZGxlcjsgIC8vL1xuXG4gIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGhhbmRsZXIsIGVsZW1lbnQpO1xufVxuXG5mdW5jdGlvbiBvblN0YXJ0RHJhZyhzdGFydERyYWdIYW5kbGVyLCBlbGVtZW50KSB7XG4gIGNvbnN0IGV2ZW50VHlwZSA9IFNUQVJUX0RSQUcsXG4gICAgICAgIGhhbmRsZXIgPSBzdGFydERyYWdIYW5kbGVyOyAgLy8vXG5cbiAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgaGFuZGxlciwgZWxlbWVudCk7XG59XG5cbmZ1bmN0aW9uIG9mZlN0YXJ0RHJhZyhzdGFydERyYWdIYW5kbGVyLCBlbGVtZW50KSB7XG4gIGNvbnN0IGV2ZW50VHlwZSA9IFNUQVJUX0RSQUcsXG4gICAgICAgIGhhbmRsZXIgPSBzdGFydERyYWdIYW5kbGVyOyAgLy8vXG5cbiAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgaGFuZGxlciwgZWxlbWVudCk7XG59XG5cbmZ1bmN0aW9uIGNhbGxIYW5kbGVycyhldmVudFR5cGUsIHJlbGF0aXZlTW91c2VUb3AsIHJlbGF0aXZlTW91c2VMZWZ0KSB7XG4gIGNvbnN0IGV2ZW50TGlzdGVuZXJzID0gdGhpcy5maW5kRXZlbnRMaXN0ZW5lcnMoZXZlbnRUeXBlKTtcblxuICBldmVudExpc3RlbmVycy5mb3JFYWNoKChldmVudExpc3RlbmVyKSA9PiB7XG4gICAgY29uc3QgeyBoYW5kbGVyLCBlbGVtZW50IH0gPSBldmVudExpc3RlbmVyO1xuXG4gICAgaGFuZGxlci5jYWxsKGVsZW1lbnQsIHJlbGF0aXZlTW91c2VUb3AsIHJlbGF0aXZlTW91c2VMZWZ0KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGVuYWJsZURyYWdnaW5nKCkge1xuICBjb25zdCB0aW1lb3V0ID0gbnVsbCxcbiAgICAgICAgdG9wT2Zmc2V0ID0gbnVsbCxcbiAgICAgICAgbGVmdE9mZnNldCA9IG51bGwsXG4gICAgICAgIHN0YXJ0TW91c2VUb3AgPSBudWxsLFxuICAgICAgICBzdGFydE1vdXNlTGVmdCA9IG51bGw7XG5cbiAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgdGltZW91dCxcbiAgICB0b3BPZmZzZXQsXG4gICAgbGVmdE9mZnNldCxcbiAgICBzdGFydE1vdXNlVG9wLFxuICAgIHN0YXJ0TW91c2VMZWZ0XG4gIH0pO1xuXG4gIHRoaXMub25Nb3VzZURvd24odGhpcy5kcmFnZ2FibGVNb3VzZURvd25IYW5kbGVyLCB0aGlzKTtcbn1cblxuZnVuY3Rpb24gZGlzYWJsZURyYWdnaW5nKCkge1xuICB0aGlzLm9mZk1vdXNlRG93bih0aGlzLmRyYWdnYWJsZU1vdXNlRG93bkhhbmRsZXIsIHRoaXMpO1xufVxuXG5mdW5jdGlvbiBpc0RyYWdnYWJsZU1vdXNlT3Zlcihtb3VzZVRvcCwgbW91c2VMZWZ0KSB7XG4gIGNvbnN0IGJvdW5kcyA9IHRoaXMuZ2V0Qm91bmRzKCksXG4gICAgICAgIGJvdW5kc092ZXJsYXBwaW5nTW91c2UgPSBib3VuZHMuaXNPdmVybGFwcGluZ01vdXNlKG1vdXNlVG9wLCBtb3VzZUxlZnQpLFxuICAgICAgICBkcmFnZ2FibGVNb3VzZU92ZXIgPSBib3VuZHNPdmVybGFwcGluZ01vdXNlOyAvLy9cblxuICByZXR1cm4gZHJhZ2dhYmxlTW91c2VPdmVyO1xufVxuXG5mdW5jdGlvbiBkcmFnZ2FibGVNb3VzZURvd25IYW5kbGVyKGV2ZW50LCBlbGVtZW50KSB7XG4gIGNvbnN0IHsgYnV0dG9uIH0gPSBldmVudDtcblxuICB3aW5kb3cub24oXCJibHVyXCIsIHRoaXMuZHJhZ2dhYmxlTW91c2VVcEhhbmRsZXIsIHRoaXMpOyAvLy9cblxuICB3aW5kb3cub25Nb3VzZVVwKHRoaXMuZHJhZ2dhYmxlTW91c2VVcEhhbmRsZXIsIHRoaXMpO1xuXG4gIHdpbmRvdy5vbk1vdXNlTW92ZSh0aGlzLmRyYWdnYWJsZU1vdXNlTW92ZUhhbmRsZXIsIHRoaXMpO1xuXG4gIGlmIChidXR0b24gPT09IExFRlRfTU9VU0VfQlVUVE9OKSB7XG4gICAgY29uc3QgZHJhZ2dpbmcgPSB0aGlzLmlzRHJhZ2dpbmcoKTtcblxuICAgIGlmICghZHJhZ2dpbmcpIHtcbiAgICAgIGNvbnN0IG1vdXNlVG9wID0gbW91c2VUb3BGcm9tRXZlbnQoZXZlbnQpLFxuICAgICAgICAgICAgbW91c2VMZWZ0ID0gbW91c2VMZWZ0RnJvbUV2ZW50KGV2ZW50KTtcblxuICAgICAgdGhpcy5zdGFydFdhaXRpbmdUb0RyYWcobW91c2VUb3AsIG1vdXNlTGVmdCk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGRyYWdnYWJsZU1vdXNlTW92ZUhhbmRsZXIoZXZlbnQsIGVsZW1lbnQpIHtcbiAgY29uc3QgbW91c2VUb3AgPSBtb3VzZVRvcEZyb21FdmVudChldmVudCksXG4gICAgICAgIG1vdXNlTGVmdCA9IG1vdXNlTGVmdEZyb21FdmVudChldmVudCk7XG5cbiAgY29uc3QgZHJhZ2dpbmcgPSB0aGlzLmlzRHJhZ2dpbmcoKTtcblxuICBpZiAoZHJhZ2dpbmcpIHtcbiAgICB0aGlzLmRyYWdnaW5nKG1vdXNlVG9wLCBtb3VzZUxlZnQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRyYWdnYWJsZU1vdXNlVXBIYW5kbGVyKGV2ZW50LCBlbGVtZW50KSB7XG4gIHdpbmRvdy5vZmYoXCJibHVyXCIsIHRoaXMuZHJhZ2dhYmxlTW91c2VVcEhhbmRsZXIsIHRoaXMpOyAgLy8vXG5cbiAgd2luZG93Lm9mZk1vdXNlVXAodGhpcy5kcmFnZ2FibGVNb3VzZVVwSGFuZGxlciwgdGhpcyk7XG5cbiAgd2luZG93Lm9mZk1vdXNlTW92ZSh0aGlzLmRyYWdnYWJsZU1vdXNlTW92ZUhhbmRsZXIsIHRoaXMpO1xuXG4gIGNvbnN0IGRyYWdnaW5nID0gdGhpcy5pc0RyYWdnaW5nKCk7XG5cbiAgaWYgKGRyYWdnaW5nKSB7XG4gICAgY29uc3QgbW91c2VUb3AgPSBtb3VzZVRvcEZyb21FdmVudChldmVudCksXG4gICAgICAgICAgbW91c2VMZWZ0ID0gbW91c2VMZWZ0RnJvbUV2ZW50KGV2ZW50KTtcblxuICAgIHRoaXMuc3RvcERyYWcobW91c2VUb3AsIG1vdXNlTGVmdCk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5zdG9wV2FpdGluZ1RvRHJhZygpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlc2V0VGltZW91dCgpIHtcbiAgY29uc3QgdGltZW91dCA9IG51bGw7XG5cbiAgdGhpcy51cGRhdGVUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5mdW5jdGlvbiBnZXRUaW1lb3V0KCkge1xuICBjb25zdCBzdGF0ZSA9IHRoaXMuZ2V0U3RhdGUoKSxcbiAgICAgICAgeyB0aW1lb3V0IH0gPSBzdGF0ZTtcblxuICByZXR1cm4gdGltZW91dDtcbn1cblxuZnVuY3Rpb24gZ2V0VG9wT2Zmc2V0KCkge1xuICBjb25zdCBzdGF0ZSA9IHRoaXMuZ2V0U3RhdGUoKSxcbiAgICAgICAgeyB0b3BPZmZzZXQgfSA9IHN0YXRlO1xuXG4gIHJldHVybiB0b3BPZmZzZXQ7XG59XG5cbmZ1bmN0aW9uIGdldExlZnRPZmZzZXQoKSB7XG4gIGNvbnN0IHN0YXRlID0gdGhpcy5nZXRTdGF0ZSgpLFxuICAgICAgICB7IGxlZnRPZmZzZXQgfSA9IHN0YXRlO1xuXG4gIHJldHVybiBsZWZ0T2Zmc2V0O1xufVxuXG5mdW5jdGlvbiBnZXRTdGFydE1vdXNlVG9wKCkge1xuICBjb25zdCBzdGF0ZSA9IHRoaXMuZ2V0U3RhdGUoKSxcbiAgICAgICAgeyBzdGFydE1vdXNlVG9wIH0gPSBzdGF0ZTtcblxuICByZXR1cm4gc3RhcnRNb3VzZVRvcDtcbn1cblxuZnVuY3Rpb24gZ2V0U3RhcnRNb3VzZUxlZnQoKSB7XG4gIGNvbnN0IHN0YXRlID0gdGhpcy5nZXRTdGF0ZSgpLFxuICAgICAgICB7IHN0YXJ0TW91c2VMZWZ0IH0gPSBzdGF0ZTtcblxuICByZXR1cm4gc3RhcnRNb3VzZUxlZnQ7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVRpbWVvdXQodGltZW91dCkge1xuICB0aGlzLnVwZGF0ZVN0YXRlKHtcbiAgICB0aW1lb3V0XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBzZXRUb3BPZmZzZXQodG9wT2Zmc2V0KSB7XG4gIHRoaXMudXBkYXRlU3RhdGUoe1xuICAgIHRvcE9mZnNldFxuICB9KTtcbn1cblxuZnVuY3Rpb24gc2V0TGVmdE9mZnNldChsZWZ0T2Zmc2V0KSB7XG4gIHRoaXMudXBkYXRlU3RhdGUoe1xuICAgIGxlZnRPZmZzZXRcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHNldFN0YXJ0TW91c2VUb3Aoc3RhcnRNb3VzZVRvcCkge1xuICB0aGlzLnVwZGF0ZVN0YXRlKHtcbiAgICBzdGFydE1vdXNlVG9wXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBzZXRTdGFydE1vdXNlTGVmdChzdGFydE1vdXNlTGVmdCkge1xuICB0aGlzLnVwZGF0ZVN0YXRlKHtcbiAgICBzdGFydE1vdXNlTGVmdFxuICB9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBpc0RyYWdnaW5nLFxuICBzdGFydFdhaXRpbmdUb0RyYWcsXG4gIHN0b3BXYWl0aW5nVG9EcmFnLFxuICBzdGFydERyYWcsXG4gIGRyYWdnaW5nLFxuICBzdG9wRHJhZyxcbiAgZHJhZyxcbiAgb25EcmFnLFxuICBvZmZEcmFnLFxuICBvblN0b3BEcmFnLFxuICBvZmZTdG9wRHJhZyxcbiAgb25TdGFydERyYWcsXG4gIG9mZlN0YXJ0RHJhZyxcbiAgY2FsbEhhbmRsZXJzLFxuICBlbmFibGVEcmFnZ2luZyxcbiAgZGlzYWJsZURyYWdnaW5nLFxuICBpc0RyYWdnYWJsZU1vdXNlT3ZlcixcbiAgZHJhZ2dhYmxlTW91c2VEb3duSGFuZGxlcixcbiAgZHJhZ2dhYmxlTW91c2VNb3ZlSGFuZGxlcixcbiAgZHJhZ2dhYmxlTW91c2VVcEhhbmRsZXIsXG4gIHJlc2V0VGltZW91dCxcbiAgZ2V0VGltZW91dCxcbiAgZ2V0VG9wT2Zmc2V0LFxuICBnZXRMZWZ0T2Zmc2V0LFxuICBnZXRTdGFydE1vdXNlVG9wLFxuICBnZXRTdGFydE1vdXNlTGVmdCxcbiAgdXBkYXRlVGltZW91dCxcbiAgc2V0VG9wT2Zmc2V0LFxuICBzZXRMZWZ0T2Zmc2V0LFxuICBzZXRTdGFydE1vdXNlVG9wLFxuICBzZXRTdGFydE1vdXNlTGVmdFxufTtcblxuZnVuY3Rpb24gbW91c2VUb3BGcm9tRXZlbnQoZXZlbnQpIHtcbiAgY29uc3QgeyBwYWdlWSB9ID0gZXZlbnQsXG4gICAgICAgIHNjcm9sbFRvcCA9IHdpbmRvdy5nZXRTY3JvbGxUb3AoKSxcbiAgICAgICAgbW91c2VUb3AgPSBwYWdlWSArIHNjcm9sbFRvcDtcblxuICByZXR1cm4gbW91c2VUb3A7XG59XG5cbmZ1bmN0aW9uIG1vdXNlTGVmdEZyb21FdmVudChldmVudCkge1xuICBjb25zdCB7IHBhZ2VYIH0gPSBldmVudCxcbiAgICAgICAgc2Nyb2xsTGVmdCA9IHdpbmRvdy5nZXRTY3JvbGxMZWZ0KCksXG4gICAgICAgIG1vdXNlTGVmdCA9IHBhZ2VYICsgc2Nyb2xsTGVmdDtcblxuICByZXR1cm4gbW91c2VMZWZ0O1xufVxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJDQUFBLFVBQVk7Ozs7O0lBRXNCLEtBQU07SUFFc0IsVUFBYztJQUVwRSxpQkFBaUIsR0FKUyxLQUFNLFdBSWhDLGlCQUFpQjtTQUVoQixVQUFVO1FBQ1gsUUFBUSxRQUFRLFFBQVEsRUFBQyxRQUFVO1dBRWxDLFFBQVE7O1NBR1Isa0JBQWtCLENBQUMsUUFBUSxFQUFFLFNBQVM7UUFDekMsT0FBTyxRQUFRLFVBQVU7UUFFekIsT0FBTyxLQUFLLElBQUk7UUFDbEIsT0FBTyxHQUFHLFVBQVU7aUJBQ2IsWUFBWTtnQkFFWCxrQkFBa0IsUUFBUSxvQkFBb0IsQ0FBQyxRQUFRLEVBQUUsU0FBUztnQkFFcEUsa0JBQWtCO3FCQUNmLFNBQVMsQ0FBQyxRQUFRLEVBQUUsU0FBUzs7dUJBcEJvQixVQUFjO2FBd0JuRSxhQUFhLENBQUMsT0FBTzs7O1NBSXJCLGlCQUFpQjtRQUNsQixPQUFPLFFBQVEsVUFBVTtRQUUzQixPQUFPLEtBQUssSUFBSTtRQUNsQixZQUFZLENBQUMsT0FBTzthQUVmLFlBQVk7OztTQUlaLFNBQVMsQ0FBQyxRQUFRLEVBQUUsU0FBUztRQUM5QixNQUFNLFFBQVEsU0FBUyxJQUN2QixTQUFTLEdBeEM2QyxVQUFj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